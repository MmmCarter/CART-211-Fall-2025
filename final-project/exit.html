<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Meta Description fro SEO -->
    <meta name="description" content="Explore the Museum of the Watched">

    <!-- Open Graph for Social Sharing -->
    <meta property="og:title" content="Museum of the Watched">
    <meta property="og:description" content="CART-211 Final Project">

    <!-- Author and Copyright -->
    <meta name="author" content="Haolei Ma">
    <meta name="copyright" content="© Copyright Haolei Ma, student project, 2025">

    <title>Museum of the Watched - Exit</title>

    <!-- External Stylesheet -->
    <link rel="stylesheet" href="default.css">

    <!--Google Fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Stack+Sans+Notch:wght@200..700&display=swap" rel="stylesheet">


</head>

<body class="home">
    <div class="matrix-bg">
        <div class="matrix-layer" id="layer-back"></div>
        <div class="matrix-layer" id="layer-front"></div>
    </div>

    <div class="scan-lines"></div>
    <div class="data-stream"></div>

    <main class="container">
        <header class="exit-header">
            <h1 class="exit-title">Museum of the Watched</h1>
        </header>

        <div class="consent-agreement">
            <div class="agreement-text">
                <p>Thank you for your careful viewing!</p>
                <p>We hope this website will help you gain a basic understanding of data surveillance and leaks. Once
                    you recognize the
                    seriousness of these issues, you can begin learning how to properly protect your data and
                    information.</p>
                <p id="special">But for now, please leave your information here.</p>
            </div>


            <div class="exit-buttons">
                <a href="index.html">
                    <button id="exit-btn1" class="exit-btn">REFUSE</button></a>
                <a href="index.html">
                    <button id="exit-btn2" class="exit-btn">EXIT</button></a>
            </div>

        </div>

        <div class="visitor-counter">
            <span>Today's visitor: <span id="counter">0000</span></span>
        </div>
    </main>

    <script>
        let count = sessionStorage.getItem("visitorCount");

        if (!count) {
            count = 0;
        } else {
            count = parseInt(count);
        }

        const counter = document.getElementById("counter");
        counter.textContent = String(count).padStart(4, '0');

        setInterval(() => {
            count++;
            counter.textContent = String(count).padStart(4, '0');

            sessionStorage.setItem("visitorCount", count);

        }, 3000);



        const letters = "アイウカキクケコｱｲｳｴｵ012345789ABCDEFGHIJKLMNOPQRSTUVXYZ#$%&*+=-";
        const names = ["BRADLEY J. TODD", "AHMAD ALRAZZAZ", "SOPHIA ANDTBACKA", "YELENA ARAKELIAN", "PHILIPPE BEAUCHEMIN", "EMILE BEDARD", "DYNA BENAZIZA", "GIA THIEN BUI", "ALEXANDRE CHARDON", "LANNA CHECK", "JAKE HAYDUK", "ASHMITHA KANAGIAH", "AGUSTIN LEE", "BENJAMIN AMCKNOFSKY", "CATERINA MARTIN", "KAI MERCIER", "DANIEL MICHUROV", "TASHA OEST O LEARY", "MATIA PAKI", "YA XUAN PANG", "ANTHONY PATIENT", "MARC-ANTOINE PILLIOT", "LUCIE SOUSSANA", "IMA WILLIAMS"];

        const chars = [
            ...letters,
            ...names
        ]

        const backLayer = document.getElementById("layer-back");
        const frontLayer = document.getElementById("layer-front");
        const secretMsg = document.getElementById("secretMsg");

        function createRain(layer, amount, speedMin, speedMax) {
            for (let i = 0; i < amount; i++) {
                const col = document.createElement("div");
                col.classList.add("matrix-column");

                let length = Math.random() * 20 + 10;
                let text = "";
                for (let j = 0; j < length; j++) {
                    text += chars[Math.floor(Math.random() * chars.length)] + "\n";
                }

                col.textContent = text;

                col.style.left = `${Math.random() * 100}vw`;
                const duration = Math.random() * (speedMax - speedMin) + speedMin;

                col.style.animation = `rain ${duration}s linear infinite`;
                col.dataset.speed = duration;

                layer.appendChild(col);
            }
        }

        createRain(backLayer, 60, 10, 30);
        createRain(frontLayer, 90, 6, 30);

        document.addEventListener("mousemove", e => {
            const x = e.clientX;
            const y = e.clientY;

            document.querySelectorAll(".matrix-column").forEach(col => {
                const rect = col.getBoundingClientRect();
                const dx = rect.left - x;
                const dy = rect.top - y;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < 150) {
                    const angle = Math.atan2(dy, dx);
                    const tx = Math.cos(angle) * 80;
                    const ty = Math.sin(angle) * 80;
                    col.style.transform = `translate(${tx}px, ${ty}px)`;
                } else {
                    col.style.transform = "";
                }
            });
        });

        let clicks = 0;
        let startTime = Date.now();

        function updateColorBehavior() {
            const duration = (Date.now() - startTime) / 1000; // seconds

            let color = "#00ff41";  // default green

            if (clicks > 10) color = "#ff0000";     // heavy clicking → danger red
            else if (duration > 20) color = "#ffff00"; // long stay → yellow warning

            document.querySelectorAll(".matrix-column").forEach(col => {
                col.style.color = color;
                col.style.filter = `drop-shadow(0 0 6px ${color})`;
            });
        }

        setInterval(updateColorBehavior, 1000);

        document.addEventListener("click", e => {
            clicks++;
            for (let i = 0; i < 25; i++) {
                const p = document.createElement("div");
                p.classList.add("particle");
                p.textContent = chars[Math.floor(Math.random() * chars.length)];

                p.style.left = e.clientX + "px";
                p.style.top = e.clientY + "px";

                document.body.appendChild(p);

                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 6 + 2;

                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;

                let opacity = 1;

                const anim = setInterval(() => {
                    const rect = p.getBoundingClientRect();
                    p.style.left = rect.left + vx + "px";
                    p.style.top = rect.top + vy + "px";

                    opacity -= 0.03;
                    p.style.opacity = opacity;

                    if (opacity <= 0) {
                        clearInterval(anim);
                        p.remove();
                    }
                }, 16);
            }
        });

    </script>

    <!--Footer-->
    <footer>
        <small><em>© This website was created as part of a student peoject. All content and design are copyright
                Haolei Ma, student, 2025</em></small>
    </footer>


</body>

</html>