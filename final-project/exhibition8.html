<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Meta Description fro SEO -->
    <meta name="description" content="Explore the Museum of the Watched">

    <!-- Open Graph for Social Sharing -->
    <meta property="og:title" content="Museum of the Watched">
    <meta property="og:description" content="CART-211 Final Project">

    <!-- Author and Copyright -->
    <meta name="author" content="Haolei Ma">
    <meta name="copyright" content="© Copyright Haolei Ma, student project, 2025">

    <title>Museum of the Watched - Hall 8</title>

    <!-- External Stylesheet -->
    <link rel="stylesheet" href="default.css">

    <!--Google Fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Stack+Sans+Notch:wght@200..700&display=swap" rel="stylesheet">

</head>

<body class="hall">

    <main class="container">
        <header class="exhibition-header">
            <h2 class="ex-title1">The Museum of the Watched</h2>
            <h1 class="ex-title2">HIDDEN CAMERA</h1>
        </header>

        <section class="content-section">

            <div class="media-column">
                <div class="media-box"><video id="camera" autoplay playsinline muted></video></div>
            </div>

            <div class="text-column">
                <h3>Got you!</h3>
                <p>When you visit certain websites, your portrait is instantly captured (Even if the website doesn't ask
                    you to turn on your camera, the other party can still "remotely activate" it for you over
                    the network.).</p>

                <a href="exit.html" class="continue-btn">CONTINUE</a>
            </div>

        </section>



        <div class="visitor-counter">
            <span>Today's visitor: <span id="counter">0000</span></span>
        </div>
    </main>

    <script>
        let count = sessionStorage.getItem("visitorCount");

        if (!count) {
            count = 0;
        } else {
            count = parseInt(count);
        }

        const counter = document.getElementById("counter");
        counter.textContent = String(count).padStart(4, '0');

        setInterval(() => {
            count++;
            counter.textContent = String(count).padStart(4, '0');

            sessionStorage.setItem("visitorCount", count);

        }, 3000);

        const video = document.getElementById("camera");

        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" }, audio: false })
                .then(stream => {
                    video.srcObject = stream;
                    video.onloadedmetadata = () => video.play();
                })
                .catch(err => {
                    console.error("Unable to access the camera: ", err);
                    alert("Please allow access to your camera to display the video!");
                });
        } else {
            alert("Your browser does not support camera access.");
        }

    </script>

    <!--Footer-->
    <footer>
        <small><em>© This website was created as part of a student peoject. All content and design are copyright
                Haolei Ma, student, 2025</em></small>
    </footer>


</body>

</html>